> æœ¬æ–‡ç”± [ç®€æ‚¦ SimpRead](http://ksria.com/simpread/) è½¬ç ï¼Œ åŸæ–‡åœ°å€ [jiangyixiong.top](https://jiangyixiong.top/2021/05/25/%E6%97%B6%E9%97%B4%E7%9A%84%E5%BE%80%E4%BA%8B%E2%80%94%E2%80%94%E8%AE%B0%E4%B8%80%E6%AC%A1%E4%B8%8E%E5%A4%8F%E4%BB%A4%E6%97%B6%E7%9A%84%E6%96%97%E6%99%BA%E6%96%97%E5%8B%87/)

> æ—¶é—´çš„å¾€äº‹â€”â€”è®°ä¸€æ¬¡ä¸å¤ä»¤æ—¶çš„æ–—æ™ºæ–—å‹‡ - Yixiong Jiang

æ—¶é—´çš„å¾€äº‹â€”â€”è®°ä¸€æ¬¡ä¸å¤ä»¤æ—¶çš„æ–—æ™ºæ–—å‹‡
===================

2021 å¹´ 5 æœˆ 25 æ—¥

[](#æ—¶é—´å¾€äº‹ "æ—¶é—´å¾€äº‹")æ—¶é—´å¾€äº‹
====================

![](https://jiangyixiong.top/images/dst-1.png)

[](#1784 "1784")1784
--------------------

> é¦–å…ˆï¼Œå¯¹æ¯æ‰‡è£…æœ‰ç™¾å¶çª—ä»¥é®æŒ¡é˜³å…‰çš„çª—æˆ·å¾æ”¶ä¸€è·¯æ˜“ï¼ˆæ³•å›½è´§å¸ï¼‰çš„ç¨ã€‚  
> ç¬¬äºŒâ€¦â€¦ åœ¨èœ¡å•†åº—é‡Œå®‰æ’å®ˆå«ï¼Œä¸å…è®¸ä»»ä½•å®¶åº­æ¯å‘¨è·å¾—è¶…è¿‡ä¸€ç£…çš„èœ¡çƒ›ä¾›åº”ã€‚  
> ç¬¬ä¸‰ï¼Œè¿˜åº”æ´¾äººçœ‹å®ˆï¼Œé˜»æ­¢æ‰€æœ‰åœ¨æ—¥è½åç»è¿‡è¡—é“çš„é©¬è½¦ï¼Œä½†åŒ»ç”Ÿã€å¤–ç§‘åŒ»ç”Ÿå’ŒåŠ©äº§å£«çš„é©¬è½¦é™¤å¤–ã€‚  
> ç¬¬å››ï¼Œæ”¹å˜äººä»¬çš„æ—¶é—´ï¼Œæ¯å¤©æ—©æ™¨ï¼Œå¤ªé˜³ä¸€å‡èµ·ï¼Œå°±è®©æ¯ä¸ªæ•™å ‚çš„æ‰€æœ‰é’Ÿå£°å“èµ·ï¼›å¦‚æœè¿™è¿˜ä¸å¤Ÿï¼Ÿè®©å¤§ç‚®åœ¨æ¯æ¡è¡—é“ä¸Šå“èµ·ï¼Œä»¥æœ‰æ•ˆåœ°å”¤é†’é‚£äº›è¿Ÿé’çš„äººï¼Œä½¿ä»–ä»¬çå¼€çœ¼ç›ï¼Œçœ‹åˆ°ä»–ä»¬çš„çœŸæ­£åˆ©ç›Šã€‚  
> â€”â€” æœ¬æ°æ˜ Â· å¯Œå…°å…‹æ— å·´é»æ—¥æŠ¥ 1784 å¹´ 4 æœˆ 26 æ—¥

å¯Œå…°å…‹æ—çœ‹ç€å·´é»æ—¥æŠ¥ä¸Šå¤´ç‰ˆåˆŠç™»çš„è‡ªå·±çš„æ–‡ç« ï¼Œæ²‰æµ¸åœ¨è‡ªå·±è¾›è¾£çš„å¹½é»˜æ„Ÿä¸­ä¸è‡ªè§‰åœ°å‘å‡ºé˜µé˜µå†·ç¬‘ã€‚æ®Šä¸çŸ¥éšç€è¿™ç¯‡æ–‡ç« ï¼Œä¸€æšç§å­å·²ç»ç§å…¥äº†äººç±»çš„å…±åŒæ„è¯†ä¸­â€”â€”æ“çºµæ—¶é—´ã€‚

[](#1895 "1895")1895
--------------------

æ¯”èµ·å¯Œå…°å…‹æ—çš„è°ƒä¾ƒä¸å˜²è®½ï¼Œä¹”æ²» Â· å“ˆå¾·æ£®æ˜¯è®¤çœŸçš„ã€‚

ä¹”æ²» Â· å“ˆå¾·æ£®æ˜¯ä¸€ä½çƒ­çˆ±æ”¶é›†æ˜†è™«çš„æ˜†è™«å­¦å®¶ï¼Œä½†ä»–åœ¨æ–°è¥¿å…°æƒ çµé¡¿é‚®å±€çš„å·¥ä½œè¿«ä½¿ä»–åªèƒ½åœ¨ä¸‹ç­æ—¶é—´è¿›è¡Œæ”¶é›†æ˜†è™«çš„ä½œä¸šã€‚å› æ­¤ï¼Œä¸‹ç­åçŸ­æš‚çš„å¤ªé˜³å…‰æˆä¸ºäº†ä»–æœ€çè§†çš„ä¸œè¥¿ï¼Œâ€œè¦æ˜¯å·¥ä½œæ—¶é—´å¯ä»¥æ ¹æ®æ—¥å…‰è°ƒæ•´ï¼Œè®©æˆ‘æœ‰æ›´å¤šçš„æ—¶é—´æ¥æ”¶é›†æ˜†è™«ï¼Œé‚£å°±å†å¥½ä¸è¿‡äº†â€ã€‚åœ¨å¯»æ±‚å˜æ›´å·¥ä½œæ—¶é—´æœªæœåï¼Œå“ˆå¾·æ£®æœ‰äº†ä¸€ä¸ªå¤§èƒ†çš„æƒ³æ³•ã€‚

1895 å¹´ï¼Œä¸€ç¯‡è®ºæ–‡è¢«é€åˆ°äº†æƒ çµé¡¿å“²å­¦å­¦ä¼šï¼Œå¹¶æ¿€èµ·åŸºç£åŸï¼ˆæ–°è¥¿å…°å—å²›æœ€å¤§åŸå¸‚ï¼‰æ”¿åºœçš„æå¤§å…´è¶£ï¼Œè¿™ç¯‡è®ºæ–‡æè®®åœ¨æ¯å¹´çš„å¤å¤©ï¼Œå°†æ—¶é’Ÿå‘å‰æ‹¨åŠ¨ä¸¤ä¸ªå°æ—¶ï¼Œä»¥æœ€å¤§é‡åˆäººä»¬çš„æ´»åŠ¨æ—¶é—´ä¸æ—¥ç…§æ—¶é—´ã€‚è€Œè¿™ç¯‡æ–‡ç« çš„ç½²åæ­£æ˜¯ä¹”æ²» Â· å“ˆå¾·æ£®ã€‚

[](#1916 "1916")1916
--------------------

åœ¨ç¬¬ä¸€æ¬¡ä¸–ç•Œå¤§æˆ˜ä¸­ï¼Œä¸ºäº†èŠ‚çœå®è´µçš„æˆ˜æ—¶èƒ½æºã€‚å¾·æ„å¿—å¸å›½ä¸å…¶ç›Ÿå‹å¥¥åŒˆå¸å›½åœ¨ 1916 å¹´ 4 æœˆ 30 æ—¥å‡Œæ™¨ï¼Œå°†å…¶æ—¶é’Ÿå‘åæ‹¨åŠ¨äº†ä¸€å°æ—¶ï¼Œæˆä¸ºäº†æœ€æ—©çš„ä¸¤ä¸ªåœ¨å…¨å›½èŒƒå›´é‡‡ç”¨å¤ä»¤æ—¶åˆ¶çš„å›½å®¶ã€‚è€Œç«™åœ¨ä»–ä»¬å¯¹ç«‹é¢çš„è‹±è”é‚¦ä¸è®¸å¤šæ¬§æ´²ä¸­ç«‹å›½å¾ˆå¿«å°±è·Ÿè¿›äº†ã€‚ä¿„ç½—æ–¯å’Œå…¶ä»–ä¸€äº›å›½å®¶åˆ™ç­‰åˆ°äº†ç¬¬äºŒå¹´ã€‚è€Œç¾å›½åœ¨ 1918 å¹´é‡‡ç”¨äº†å¤ä»¤æ—¶ã€‚è™½ç„¶ä¹‹åå¤§å¤šæ•°å›½å®¶åœ¨æˆ˜äº‰ç»“æŸåçš„å‡ å¹´é‡Œæ”¾å¼ƒäº†å¤ä»¤æ—¶ï¼Œä½†éšç€æ—¶é—´æ¥åˆ°çˆ†å‘èƒ½æºå±æœºçš„ 70 å¹´ä»£ï¼Œå¤ä»¤æ—¶å†ä¸€æ¬¡å¼€å§‹å˜å¾—æ™®éï¼Œå¹¶ä¸€ç›´ç»´æŒè‡³ä»Šã€‚

[](#2021 "2021")2021
--------------------

2021 å¹´ 4 æœˆ 4 æ—¥ï¼Œæ¾³æ´²ä¸œéƒ¨æ—¶é—´å‡Œæ™¨ 2 ç‚¹ 59 åˆ† 59 ç§’ï¼Œä¸€ç§’é’Ÿåï¼Œå½“åœ°çš„æ‰€æœ‰æ—¶é’Ÿå°†ä¼šå‘å‰ç§»åŠ¨ä¸€ä¸ªå°æ—¶ï¼Œå›åˆ° 2 ç‚¹æ•´ï¼Œä¸€å¦‚å¾€å¹´ã€‚

äºæ­¤åŒæ—¶ï¼Œä¸€å base åœ¨ä¸­å›½è¥¿å®‰çš„ç¨‹åºçŒ¿æ­£åœ¨å®¶ä¸­å®‰ç„¶æ²‰ç¡ã€‚

ç¬¬äºŒå¤©ï¼Œä»–æ‰€åœ¨æ¾³æ´²æŸé¡¹ç›®ç»„å‘ç°ï¼Œéƒ¨ç½²åœ¨ AWS æ‚‰å°¼çš„ E2E test äº§ç”Ÿäº†å¤§é‡æŠ¥é”™ã€‚å…¶ä¸­å…±åŒç‚¹ï¼Œæ˜¯è¿™äº›é”™è¯¯å…¨éƒ¨ä¸æ—¶é—´è®¡ç®—æœ‰å…³ã€‚ç»è¿‡ä¸€ç³»åˆ—çš„ Debugï¼Œä»–ä»¬å®šä½åˆ°äº†æ­£åœ¨ä½¿ç”¨ä¸­ï¼Œåä¸º Day.js çš„ Datetime Utils ï¼Œè¿™ä¸ªå·²ç»ç¨³å®šä½¿ç”¨åŠè½½çš„ dependency åœ¨ä¸€å¤œä¹‹é—´å‡ºç°äº†è¡Œä¸ºå¼‚å¸¸ã€‚

å°±åœ¨è¿™ä¸ªç¨‹åºçŒ¿å’Œä»–æ‰€åœ¨çš„å›¢é˜Ÿç„¦å¤´çƒ‚é¢ç™¾æ€ä¸å¾—å…¶è§£æ—¶ï¼Œæœ¬æ°æ˜ Â· å¯Œå…°å…‹æ—çš„å†·ç¬‘ä»¿ä½›å¼•åŠ›æ³¢ä¸€èˆ¬ç©¿è¶Šç™¾å¹´çš„æ—¶å…‰ï¼Œæ¥åˆ°äº†ä»–ä»¬è€³ç•”ã€‚

[](#è®°ä¸€æ¬¡ä¸æ—¶é—´çš„æ–—æ™ºæ–—å‹‡ "è®°ä¸€æ¬¡ä¸æ—¶é—´çš„æ–—æ™ºæ–—å‹‡")è®°ä¸€æ¬¡ä¸æ—¶é—´çš„æ–—æ™ºæ–—å‹‡
=========================================

[](#äº‹ä»¶å›é¡¾ "äº‹ä»¶å›é¡¾")äº‹ä»¶å›é¡¾
--------------------

å¥½äº†æˆ‘ä¸è£…äº†æˆ‘æ‘Šç‰Œäº†ï¼Œæˆ‘è¯´çš„è¿™ä¸ªç¨‹åºçŒ¿å°±æ˜¯æˆ‘è‡ªå·±ã€‚

åœ¨å‰ä¸€æ®µæ—¶é—´ï¼Œæˆ‘ä»¬é¡¹ç›®ç»„é‡åˆ°äº†ç”±äº DSTï¼ˆå³ä¸Šæ–‡æåˆ°çš„ Daylight saving timeï¼Œåˆç§°æ—¥å…‰èŠ‚çº¦æ—¶é—´ï¼Œæˆ–å¤ä»¤æ—¶ï¼‰äº§ç”Ÿçš„æ—¶é—´è®¡ç®—é—®é¢˜ã€‚

è¿™æ¬¡äº‹ä»¶çš„èµ·å› æ˜¯ï¼Œæˆ‘ä»¬é¡¹ç›®ä¸­ç”¨åˆ°çš„ Day.js æ—¶é—´è®¡ç®—å·¥å…·ï¼Œåœ¨ç³»ç»Ÿæ—¶é—´æ˜¯ AEDTï¼ˆæ¾³æ´²ä¸œéƒ¨å¤ä»¤æ—¶ï¼‰æ—¶è¡¨ç°æ­£å¸¸ï¼Œä½†å½“ç³»ç»Ÿæ—¶é—´å˜ä¸º AESTï¼ˆæ¾³æ´²ä¸œéƒ¨æ ‡å‡†æ—¶ï¼‰æ—¶ï¼Œä»–çš„æ—¶é—´è®¡ç®—åŠŸèƒ½å°±ä¼šå‡ºç°å¼‚å¸¸ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬é›†æˆçš„ç³»ç»Ÿä¸¥æ ¼è¦æ±‚æˆ‘ä»¬ä¼ è¾“çš„æ—¶é—´ä¸º ISO æ ¼å¼çš„å½“åœ°æ—¶é—´ï¼Œè¿™ä¹Ÿå¯¹æˆ‘ä»¬æ—¶åŒºè½¬æ¢çš„å‡†ç¡®æ€§æå‡ºäº†æ›´é«˜çš„è¦æ±‚ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å†³å®šæ›¿æ¢ Day.jsï¼Œå¹¶é›†ä¸­å°è£…å‡ºä¸€ä¸ª Datetime utils æ¥ç»Ÿä¸€å¤„ç†æ—¶é—´è®¡ç®—ã€‚è¿™ä¸ª Datetime utils åœ¨æˆ‘ä»¬çš„å¼€å‘è¿‡ç¨‹ä¸­å‰å‰ååæ¢è¿‡æ•°ä¸ªæ—¶é—´è®¡ç®—åº“ï¼Œä½†ä»–ä»¬çš„è¡¨ç°éƒ½ä¸ç®—å®Œç¾ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜æˆ‘ä»¬è°ƒç ”äº† TypeScript ç”Ÿæ€ä¸‹å¸¸ç”¨çš„æ—¶é—´è®¡ç®—åº“ï¼Œå¹¶è¶Ÿè¿‡äº†ä¸å°‘å‘ï¼Œæ‰€ä»¥å€Ÿè¿™ç¯‡æ–‡ç« åˆ†äº«ä¸‹æˆ‘ä»¬å­¦åˆ°çš„ä¸€äº›æ—¶é—´è¡¨ç¤ºä¸å¤ä»¤æ—¶ç›¸å…³çŸ¥è¯†ï¼Œå¸Œæœ›èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚

[](#æ—¶é—´çš„è¡¨ç¤º "æ—¶é—´çš„è¡¨ç¤º")æ—¶é—´çš„è¡¨ç¤º
-----------------------

æ—©åœ¨è®¡ç®—æœºå‡ºç°å¾ˆä¹…ä»¥å‰ï¼Œäººç±»å°±æœ‰äº†ä¸€å¥—é€šç”¨ä¸”å®Œå–„çš„æè¿°æ—¶é—´çš„æ–¹æ³•ã€‚

![](https://jiangyixiong.top/images/dst-2.png)

è¿™æ˜¯æˆ‘ä»¬éšå¤„å¯è§çš„ä¸€ç¯‡æ–°é—»ç¨¿ï¼Œå…¶ä¸­çš„æ—¶é—´è¡¨ç¤ºå¦‚ä¸‹ï¼š

> 2021 å¹´ 5 æœˆ 11 æ—¥ ï¼ˆæ˜ŸæœŸäºŒï¼‰ä¸Šåˆ 10 æ—¶

é…åˆç€æ–°é—»çš„åœ°åŒºä¿¡æ¯ï¼Œæˆ‘ä»¬ä¾¿å¾—åˆ°äº†ä¸€ä¸ªç²¾å‡†çš„æ—¶é—´ç‚¹ï¼š

> 2021 å¹´ 5 æœˆ 11 æ—¥ 10 ç‚¹ 0 åˆ† 0 ç§’ åŒ—äº¬æ—¶é—´

ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥è®©è¿™ä¸ªæ—¶é—´ç‚¹çš„è¡¨ç¤ºæ›´ä¸ºå›½é™…åŒ–ï¼š

> 2021-05-11 10:00:00 GMT +08:00 ï¼ˆå›½é™…åŒ–è¡¨ç¤ºï¼‰  
> â¬‡ï¸  
> 2021-05-11T10:00:00.000+08:00:00 ï¼ˆISO æ ¼å¼è¡¨ç¤ºï¼‰  
> â¬‡ï¸  
> 2021-05-11T02:00:00.000Z ï¼ˆè½¬æ¢ä¸º UTC æ—¶é—´å¹¶ä»¥ ISO æ ¼å¼è¡¨ç¤ºï¼‰

ä¸ºäº†è®©æ—¶é—´ç‚¹å¯ä»¥åœ¨è®¡ç®—æœºä¸­å®Œç¾çš„è¡¨ç¤ºï¼Œæˆ‘ä»¬è®¡ç®—å‡ºå½“å‰æ—¶é—´è·ç¦»ä¸–ç•Œæ ‡å‡†æ—¶çš„ 1970 å¹´ 1 æœˆ 1 æ—¥ 0 ç‚¹ 0 åˆ† 0 ç§’çš„æ¯«ç§’æ•°è¿›è¡Œå­˜å‚¨ï¼Œè¿™ä¸ªæ•°å€¼è¢«ç§°ä¸ºæ—¶é—´æˆ³ã€‚è¿™ä¸ªæ—¶é—´æˆ³ç”±è®¡ç®—æœºæ ¹æ®æœºå™¨çš„æ—¶é—´è¡¨ç¤ºï¼Œæ—¶åŒºç­‰è®¾ç½®è¿›è¡Œè§£æã€‚

> 1620698400000

[](#GMTä¸UTC "GMTä¸UTC")GMT ä¸ UTC
-------------------------------

åœ¨æ—¶é—´çš„è¡¨ç¤ºä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬è§è¯†åˆ°äº†ä¸¤ä¸ªâ€˜é»‘è¯â€™ï¼šGMT å’Œ UTCï¼Œä¸¤ä¸ªè¯å…¶å®æŒ‡å‘çš„æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µï¼Œåªæ˜¯ç”±äºå…·ä½“å«ä¹‰ååˆ†ç›¸è¿‘ä»¥è‡³äºåœ¨å¾ˆå¤šåœ°æ–¹éƒ½æ˜¯æ··ç”¨çš„ï¼Œç”¨ä»¥è¡¨ç¤ºä¸–ç•Œæ ‡å‡†æ—¶é—´ï¼Œå³ + 0 åŒºçš„æ—¶é—´ã€‚

GMT ä¸º Greenwich Mean Time çš„ç¼©å†™ï¼Œæ„ä¸ºæ ¼æ—å¨æ²»è§‚æµ‹æ—¶é—´ã€‚æ˜¯åè½åœ¨ 0 ç»åº¦çº¿ä¸Šçš„è‹±å›½æ ¼æ—å¨æ²»å¤©æ–‡å°è§‚æµ‹å¹¶å‘å¸ƒçš„å½“åœ°æ—¶é—´ã€‚ä» 1925 å¹´è‡³ 1972 å¹´ï¼Œä»–éƒ½è¢«ç”¨ä½œä¸–ç•Œæ ‡å‡†æ—¶é—´ã€‚

UTC çš„æ¦‚å¿µåˆ™æ˜¯å»ºç«‹äº 1972 å¹´ï¼Œä»¥å¼¥è¡¥åœ°çƒè‡ªè½¬é€Ÿåº¦å‡æ…¢çš„é—®é¢˜ã€‚è¿™ä¸ªæ—¶é—´ç³»ç»Ÿä»¥å›½é™…åŸå­æ—¶ä¸ºåŸºç¡€ï¼Œä½¿ç”¨é“¯çš„åŸå­é¢‘ç‡æ¥è®¾å®šæ—¶é—´æ ‡å‡†ã€‚æ¢å¥è¯è¯´ï¼ŒUTC æ˜¯ GMT çš„æ›´ç²¾ç¡®çš„æ›¿ä»£ç³»ç»Ÿã€‚

> UTC åå­—çš„æ¥æºæ˜¯åœ¨å»ºç«‹è¿™å¥—è®¡æ—¶ç³»ç»Ÿæ—¶ï¼Œè‹±è¯­å›½å®¶ä»¬å¸Œæœ›å°†å…¶å‘½åä¸º CUT (Coordinated Universal Time)ï¼Œè€Œæ³•è¯­å›½å®¶åˆ™å¸Œæœ›å°†å…¶å‘½åä¸º TUC (Temps Universal Coordonn)ã€‚æœ€ç»ˆå„é€€ä¸€æ­¥ï¼Œå–äº†ä¸ªæ²¡æœ‰å®é™…å«ä¹‰çš„åå­—ï¼šUTCã€‚

[](#Offsetä¸Timezone "Offsetä¸Timezone")Offset ä¸ Timezone
-------------------------------------------------------

è¯´å®Œäº†æ—¶é—´è¡¨ç¤ºä¸­æåˆ°çš„ GMT ä¸ UTCï¼Œä¸‹æ¥è¯´ä¸€è¯´æ—¶é—´è¡¨ç¤ºä¸­æœ€åçš„ä¸€éƒ¨åˆ†ï¼š+08:00:00

è¿™ä¸ªéƒ¨åˆ†è¢«ç§°ä¸º offsetï¼Œæ„æŒ‡ä¸ºå½“åœ°æ—¶é—´ç›¸è¾ƒäº UTC çš„åç§»é‡ã€‚+08:00:00 çš„å…·ä½“å«ä¹‰å°±æ˜¯ï¼Œæ¯” UTC æ—¶é—´å¿« 8 ä¸ªå°æ—¶ã€‚åŸºäºå½“åœ°æ—¶é—´ä¸å½“åœ°çš„ offsetï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾çš„è®¡ç®—å‡ºå½“æ—¶çš„ UTC æ—¶é—´ï¼š

localtimeâˆ’offset=UTCtime

$$local_time - offset = UTC_time$$

éœ€è¦æ³¨æ„çš„æ˜¯, offset â‰  timezoneï¼Œæˆ‘ä»¬æ‰€è¯´çš„ä¸œå…«åŒºï¼Œè¥¿ä¸€åŒºç­‰è¿™äº›æ¦‚å¿µæŒ‡çš„å¹¶ä¸æ˜¯ timezoneï¼ˆæ—¶åŒºï¼‰ï¼Œè€Œæ˜¯ä¸€ç»„ offset ä¸º + 08:00:00 çš„æ—¶åŒºçš„é›†åˆã€‚ä¸€ä¸ªğŸŒ°è§ä¸‹å›¾ï¼š

```
ä¸œå…«åŒº = {CSTï¼ˆä¸­å›½æ ‡å‡†æ—¶ï¼‰,SGTï¼ˆæ–°åŠ å¡æ—¶é—´ï¼‰,AWSTï¼ˆæ¾³æ´²è¥¿éƒ¨æ ‡å‡†æ—¶ï¼‰... }
```

æˆªè‡³ç›®å‰ï¼Œä¸€åˆ‡çœ‹èµ·æ¥è¿˜ä¸ç®—å¤æ‚ï¼Œoffset æ˜¯ timezone çš„ä¸€ä¸ªå±æ€§ï¼Œä¸€ä¸ª offset å¯ä»¥å¯¹åº”å¤šä¸ª timezoneã€‚ä½†å½“ DST å‡ºç°åï¼Œäº‹æƒ…åäº†èµ·æ¥ã€‚

[](#DST "DST")DST
-----------------

DST (Daylight saving time)ï¼Œæ—¥å…‰èŠ‚çº¦æ—¶ï¼Œå¤ä»¤æ—¶ / å†¬ä»¤æ—¶ï¼Œè¿™ä¸ªå¥‡æ€ªçš„å°ç²¾çµæœ‰ç€å¤šä¸ªåå­—ã€‚å®ƒä¼šåœ¨æ¯å¹´æ˜¥å¤©çš„æŸä¸€å¤©å°†æ—¶é’Ÿå‘åæ‹¨ä¸€å°æ—¶ï¼Œåˆåœ¨ç§‹å¤©çš„æŸä¸€å¤©å°†æ—¶é’Ÿå‘å‰æ‹¨åŠ¨ä¸€ä¸ªå°æ—¶ã€‚

å› ä¸º DSTï¼Œä¸€ä¸ª timezone å¼€å§‹åœ¨ä¸åŒçš„æ—¶é—´æ®µå¯¹åº”ä¸åŒçš„ offsetã€‚æˆ‘ä»¬çš„é¬¼æ•…äº‹å°±æ­¤å±•å¼€ï¼š

*   åœ¨æ‚‰å°¼ï¼Œ2021 å¹´ 4 æœˆ 4 æ—¥å‡Œæ™¨ 2 ç‚¹ 59 åˆ† 59 ç§’åï¼Œæ—¶é’ˆä¼šå›æ»šå¹¶å†æ¬¡æŒ‡å‘ 2 ç‚¹
*   ä¹‹åï¼Œåœ¨ 2021 å¹´ 10 æœˆ 3 æ—¥å‡Œæ™¨ 1 ç‚¹ 59 åˆ† 59 ç§’åï¼Œæ—¶é’ˆä¼šè·³è¿‡ 2 ç‚¹ç›´æ¥æŒ‡å‘ 3 ç‚¹ï¼Œéšä¹‹è€Œæ¥çš„æ˜¯â¬‡ï¸
*   æ‚‰å°¼äººä¼šç»å†ä¸¤æ¬¡ 2021 å¹´ 4 æœˆ 4 æ—¥å‡Œæ™¨ 2 ç‚¹åˆ° 3 ç‚¹ï¼ï¼
*   2021 å¹´ 10 æœˆ 3 æ—¥å‡Œæ™¨ 2 ç‚¹åˆ° 3 ç‚¹åœ¨æ‚‰å°¼ä¸å­˜åœ¨ï¼ï¼
*   è¿™ç§äº‹æƒ…æ¯å¹´éƒ½ä¼šå‘ç”Ÿï¼ï¼

é‚£ã€‚ã€‚ã€‚èƒ½ä¸èƒ½å†ææ€–ç‚¹ï¼Ÿ

*   **æ¯å¹´åˆ‡æ¢ DST å’Œ ST çš„æ—¶é—´éƒ½ä¼šå˜ï¼ï¼ï¼**

æ˜¯çš„ï¼Œæ¯å¹´åº”ç”¨ DST çš„æ—¶é—´æ®µæ˜¯ä¸å›ºå®šçš„ï¼Œå„ä¸ªå›½å®¶å¯ä»¥æ ¹æ®è¿‘å¹´æ—¥ç…§æƒ…å†µçµæ´»è°ƒæ•´ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ IANA çš„ç½‘ç«™ä¸ŠæŸ¥è¯¢åˆ°å„å›½çš„å¤ä»¤æ—¶æ•°æ®åº“ã€‚è¿™ä¸ªæ•°æ®åº“æ¯å¹´éƒ½ä¼šæ ¹æ®å„å›½å®˜æ–¹ç»„ç»‡æä¾›çš„æ•°æ®æ›´æ–°ã€‚æˆ‘ä»¬ä»ä¸­æ‘˜å½•å‡º 2021-01-24 ç‰ˆæœ¬ä¸­æ‚‰å°¼æ—¶é—´çš„éƒ¨åˆ†ä½œå±•ç¤ºï¼š

![](https://jiangyixiong.top/images/dst-3.png)

å¯ä»¥çœ‹åˆ°åœ¨ 2008 å¹´ä¹‹å‰ï¼Œæ¾³æ´²ä¸œéƒ¨çš„å¤ä»¤æ—¶çš„æ—¶é—´æ¯éš” 3ã€5 å¹´éƒ½ä¼šå˜åŒ–ä¸€æ¬¡ï¼Œå¥½åœ¨ 2008 å¹´ä¹‹åæš‚æ—¶å›ºå®šäº†ä¸‹æ¥ï¼Œåœ¨æ¯å¹´åæœˆçš„ç¬¬ä¸€ä¸ªå‘¨æ—¥åˆ‡æ¢è‡³å¤ä»¤æ—¶ï¼Œåœ¨æ¯å¹´å››æœˆçš„ç¬¬ä¸€ä¸ªå‘¨æ—¥åˆ‡å›å†¬ä»¤æ—¶ã€‚

è¿™ç§ä¸è§„å¾‹çš„å˜åŒ–ä¼šæ€ä¹ˆå½±å“æˆ‘ä»¬æ—¥æœŸçš„è®¡ç®—ï¼Ÿæˆ‘ä»¬ç»§ç»­å‘ä¸‹çœ‹ã€‚

[](#TypeScriptç”Ÿæ€ä¸‹å¦‚ä½•å¤„ç†æ—¶é—´ "TypeScriptç”Ÿæ€ä¸‹å¦‚ä½•å¤„ç†æ—¶é—´")TypeScript ç”Ÿæ€ä¸‹å¦‚ä½•å¤„ç†æ—¶é—´
------------------------------------------------------------------

é¢å¯¹æ—¶é—´çš„è®¡ç®—ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šé‡‡ç”¨ä¸‹åˆ—è¡¨æ ¼ä¸­çš„å·¥å…· / åº“ï¼Œä½†ç»è¿‡è¿™æ®µæ—¶é—´çš„è°ƒç ”ï¼Œæˆ‘ä»¬å‘ç°ä»–ä»¬éƒ½ä¸å®Œç¾ï¼Œåœ¨æ­¤ç®€è¦çš„åˆ—ä¸¾ä¸‹æˆ‘ä»¬çš„ä¸€äº›å‘ç°ï¼š

*   Dateï¼šæœ€åŸºç¡€çš„æ—¥æœŸå·¥å…·
    *   JS åŸç”Ÿç±»å‹
    *   æä¾›ä¸€äº›ååˆ†åŸºç¡€çš„æ–¹æ³•ï¼Œæ— æ³•åº”å¯¹æ—¥æœŸè®¡ç®—ç­‰å·¥ä½œ
*   Moment.jsï¼šåç«¯é¡¹ç›®é¦–é€‰ï¼Œå¦‚æœéœ€è¦è®¡ç®— 1970 å‰ã€2039 åçš„å¤ä»¤æ—¶æ—¶é—´ï¼Œè®°å¾—æ‰‹åŠ¨è®¡ç®—å¹¶æ·»åŠ å¤ä»¤æ—¶æ•°æ®
    *   è€ç‰Œæ—¥æœŸå·¥å…·åº“ï¼ŒåŠŸèƒ½å®Œå–„ API å‹å¥½
    *   æä¾›å®Œå–„çš„å•å…ƒæµ‹è¯•ä»¥ä¿è¯è®¡ç®—æ­£ç¡®æ€§
    *   æ—¶åŒºæ•°æ®å…¨ï¼Œä½†ä»…è¦†ç›–äº† 1970-2039 å¹´ï¼Œè¶…å‡ºéƒ¨åˆ†éœ€è‡ªè¡Œç”Ÿæˆæ•°æ®å¡«å……
    *   è‡ªåŠ¨è§£æå­—ç¬¦ä¸²èƒ½åŠ›è¾ƒå¼±ï¼Œéœ€è¦è§£ææ—¶æ‰‹åŠ¨æä¾›æ ¼å¼
    *   æ•°æ®åŒ…è¾ƒå¤§ï¼Œå®Œæ•´ç‰ˆä¸é€‚åˆå‰ç«¯å·¥ç¨‹ä½¿ç”¨
    *   ç›®å‰è¯¥é¡¹ç›®ä¸å†æ›´æ–° Featureï¼Œä»…åšç»´æŠ¤
*   Day.jsï¼š~ä¸œåŒ—åŠçƒæœ€å¥½çš„æ—¶é—´å·¥å…·ï¼Œ~å¦‚æœä½ ä¸éœ€è¦è·¨æ—¶åŒº / å¤ä»¤æ—¶çš„è®¡ç®—ï¼Œå¹¶ä¸”ç¡®è®¤ä½ çš„é¡¹ç›®ä¸ä¼šè·‘åœ¨ç³»ç»Ÿæ—¶åŒºæœ‰å¤ä»¤æ—¶è®¾ç½®çš„ç¯å¢ƒä¸­ï¼Œé€‰å®ƒåŸºæœ¬æ²¡é—®é¢˜
    *   æ¯”è¾ƒå—æ¬¢è¿çš„æ—¥æœŸå·¥å…·åº“ï¼Œæä¾›ç±» Moment.js çš„ API
    *   ç›¸è¾ƒäº Moment.jsï¼Œæä¾› immutable çš„å®ä¾‹å¯¹è±¡
    *   åœ¨ç³»ç»Ÿæ—¶åŒºæœ‰å¤ä»¤æ—¶æ—¶ï¼Œä¼šæœ‰å‡ ç‡äº§ç”Ÿæ—¥æœŸè®¡ç®— bug
    *   åœ¨ç³»ç»Ÿæ—¶åŒºæœ‰å¤ä»¤æ—¶æ—¶ï¼Œæ—¶åŒºè½¬æ¢ä¼šè®¡ç®—é”™è¯¯
*   Spacetimeï¼šè½»é‡çº§æ—¶é—´å·¥å…·ï¼Œbug ä¸å°‘ï¼Œæœªæ¥å¯æœŸ
    *   ä¼˜ç§€çš„è‡ªåŠ¨å­—ç¬¦ä¸²è§£æèƒ½åŠ›
    *   è¾ƒä¸ºå‡†ç¡®çš„è·¨æ—¶åŒº / å¤ä»¤æ—¶è½¬æ¢ä¸è®¡ç®—
    *   å¤ä»¤æ—¶æ•°æ®ä¸å¤Ÿä¸¥è°¨ï¼ˆä¾‹å¦‚æ‚‰å°¼æ—¶åŒºï¼Œå†™æ­»äº†æ¯å¹´ 4 æœˆ 3 æ—¥å’Œ 10 æœˆ 3 æ—¥åˆ‡æ¢å¤ä»¤æ—¶ï¼‰
    *   éƒ¨åˆ†å¯ work around çš„å°é—®é¢˜
*   å…¶ä»–å¯ä¾›é€‰æ‹©çš„æ—¥æœŸå·¥å…·
    *   fns-date
    *   Luxon

[](#ä¸€ä¸ªDatetime-Utilsé¢å¯¹çš„æŒ‘æˆ˜ "ä¸€ä¸ªDatetime Utilsé¢å¯¹çš„æŒ‘æˆ˜")ä¸€ä¸ª Datetime Utils é¢å¯¹çš„æŒ‘æˆ˜
-------------------------------------------------------------------------

çœ‹äº†çœ‹è¿™äº›åº“ï¼Œæ˜¯ä¸æ˜¯è§‰å¾— TypeScript ç”Ÿæ€å¼±çˆ†äº†ï¼Œä¸€ä¸ªèƒ½æ‰“çš„æ—¶é—´å·¥å…·éƒ½æ²¡æœ‰ï¼Ÿå…¶å®è¿™çœŸä¸æ€ª TypeScript ç”Ÿæ€ä¸å¥½ï¼Œæ›´ä¸æ˜¯è¿™äº›æ—¶é—´å·¥å…·çš„å¼€å‘è€…æ°´å¹³ä¸è¡Œã€‚è€Œæ˜¯å¼€å‘ä¸€ä¸ªå…¨ä¸–ç•Œä¸–ç•Œå„ä¸ªæ—¶åŒºéƒ½èƒ½æ”¾å¿ƒä½¿ç”¨ï¼Œå¹¶ä¿è¯è®¡ç®—å‡†ç¡®æ€§çš„ Datetime Utils çœŸçš„å¤ªéš¾äº†ï¼æœ‰å¤šéš¾ï¼Ÿä¸å¦‚ç”¨æˆ‘ä»¬çš„äººç±»å¤§è„‘æ¥è¯•è¯•è®¡ç®—ä¸‹é¢è¿™äº›é—®é¢˜~ï¼Œéœ€è¦æ­£ç¡®ç­”æ¡ˆå¯ä»¥è”ç³»æˆ‘~ï¼š

*   02/01/2021 è¡¨ç¤ºå‡ æœˆå‡ æ—¥ï¼Ÿ
*   ç°åœ¨æ˜¯æ‚‰å°¼ 1999 å¹´ 10 æœˆ 30 æ—¥ä¸‹åˆ 6 ç‚¹ï¼Œ12 ä¸ªå°æ—¶ä»¥åæ˜¯ä»€ä¹ˆæ—¶é—´ï¼Ÿ
*   æ‚‰å°¼ 2051 å¹´ 4 æœˆ 2 æ—¥æ˜¯å¤ä»¤æ—¶ï¼ˆAEDTï¼‰è¿˜æ˜¯å†¬ä»¤æ—¶ï¼ˆAESTï¼‰ï¼Ÿ
*   æ‚‰å°¼ 2021 å¹´ 4 æœˆ 3 æ—¥å‡Œæ™¨ 2 ç‚¹ 30 åˆ†å¯¹åº” UTC æ—¶é—´æ˜¯ä»€ä¹ˆï¼Ÿ
*   å½“æˆ‘ä»¬è°ˆè®ºåŠ ä¸€å¹´æ—¶ï¼Œå…·ä½“æŒ‡åŠ å¤šå°‘å¤©ï¼Ÿ2020 å¹´ 2 æœˆ 29 æ—¥åŠ ä¸Šä¸€å¹´æ˜¯ 2021 å¹´å‡ æœˆå‡ æ—¥ï¼ŸåŠ ä¸€å¹´æ˜¯åŠ å¤šå°‘å¤©ï¼Ÿ
*   å½“æˆ‘é—®è°ˆè®ºåŠ ä¸€æœˆæ—¶ï¼Œå…·ä½“æŒ‡åŠ å¤šå°‘å¤©ï¼Ÿ1 æœˆ 31 æ—¥åŠ ä¸Šä¸€ä¸ªæœˆä¹‹åæ˜¯å‡ æœˆå‡ æ—¥ï¼ŸåŠ ä¸€ä¸ªæœˆæ˜¯å¤šå°‘å¤©ï¼Ÿ
*   1 æœˆ 31 æ—¥åˆ° 2 æœˆ 15 æ—¥éš”äº†å¤šå°‘ä¸ªæœˆï¼Ÿå¯ä»¥ç”¨å°æ•°è¡¨ç¤ºå—ï¼Ÿ

è¿™äº› tricky çš„é—®é¢˜ä¸æ˜¯æˆ‘æ•…æ„æƒ³æ¥ä¸ºéš¾å„ä½ï¼Œè€Œæ˜¯çœŸçš„åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­é‡åˆ°ç”šè‡³å› ä¸ºè®¡ç®—é—®é¢˜å¼•å‘äº† bugã€‚è¿™äº›é—®é¢˜ç›®å‰éƒ½å·²ç»è¦†ç›–åœ¨äº†å•å…ƒæµ‹è¯•ä¸­ã€‚

æ±‡æ€»ä¸‹è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œä¸€ä¸ª Datetime Utilsï¼Œä¼šé‡åˆ°å¦‚ä¸‹è¿™äº›æŒ‘æˆ˜ï¼š

![](https://jiangyixiong.top/images/dst-4.png)

åœ¨æˆ‘ä»¬å°è£…è‡ªç”¨çš„ Datetime utils çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿæ€»ç»“å‡ºäº†ä¸€äº›è§‚ç‚¹ï¼š

*   é’ˆå¯¹ä½¿ç”¨åœºæ™¯é€‰æ‹©åˆé€‚çš„ä¸‰æ–¹åº“ã€‚æ²¡æœ‰æœ€å¥½çš„å·¥å…·ï¼Œåªæœ‰æœ€é€‚åˆçš„å·¥å…·ã€‚
*   åœ¨åº”ç”¨ä¸­é›†ä¸­å°è£…ç®¡ç†æ—¶é—´è®¡ç®—é€»è¾‘ã€‚å¯¹äºåŒä¸€ä¸ªé¡¹ç›®ï¼Œä¸€å®šè¦å¯¹æ—¶é—´çš„è®¡ç®—é€»è¾‘æœ‰ä¸€ä¸ªå›¢é˜Ÿå…±è¯†ã€‚å¹¶å°†è¿™äº›å…±è¯†ç»Ÿä¸€å®ç°å¹¶å°è£…åœ¨ä¸€å¤„ï¼Œä»¥ä¿è¯é¡¹ç›®çš„è¡Œä¸ºä¸€è‡´æ€§ã€‚
*   å¤§é‡è¦†ç›–å•å…ƒæµ‹è¯•ï¼ˆè¾ƒéš¾å®è·µï¼Œä¾‹å¦‚ moment.js æä¾›äº† 160531 ä¸ª test caseï¼‰ã€‚
*   é‡‡ç”¨æ—¶é—´æˆ³ / UTC ISO ä¼ è¾“æ—¶é—´ï¼Œè¿™ç§æ ¼å¼çš„æ—¶é—´å„ç±»è®¡ç®—å·¥å…· / åº“è§£æçš„é€»è¾‘åŸºæœ¬éƒ½æ˜¯ä¸€è‡´çš„ï¼Œä¸ä¼šäº§ç”Ÿæ­§ä¹‰ã€‚
*   æœåŠ¡ç«¯è®¡ç®—ï¼Œè¿™å±äºæœ¬äººçš„ä¸€ç‚¹æ‹™è§ã€‚å¯¹äºæ—¶é—´è¿™ç±»æ ‡å‡†å­˜åœ¨å˜åŒ–ä¸”æ—¶æ•ˆæ€§è¾ƒå¼ºçš„è®¡ç®—ï¼Œä¸ªäººè®¤ä¸ºååˆ†é€‚åˆæ”¾åœ¨ç”±æƒå¨æœºæ„æä¾›çš„æœåŠ¡ç«¯è¿›è¡Œï¼Œç±»ä¼¼äºç°åœ¨çš„æˆæ—¶æœåŠ¡ã€‚

[](#åè®° "åè®°")åè®°
--------------

è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å†™è¿™ç±»åšå®¢ï¼Œå¯¹äºç›¸å…³çŸ¥è¯†ä¹Ÿå…¨é è¿™æ®µæ—¶é—´çš„æ¶è¡¥ï¼Œå¦‚æœé”™è¯¯è¿˜è¯·æ–§æ­£ã€‚è¿™ç¯‡åšå®¢ä¸å…¶è¯´æ˜¯åˆ†äº«ä¸å¦‚è¯´æ˜¯å¯¹å¤ä»¤æ—¶åˆ¶åº¦çš„åæ§½ã€‚åœ¨æˆ‘çœ‹æ¥å¤ä»¤æ—¶è¿™ç§æ¯”è¾ƒæ— è§„å¾‹çš„ä¿®æ”¹ â€œå…¨å±€å˜é‡â€ çš„è¡Œä¸ºæ˜¯æ¯”è¾ƒå®¹æ˜“äº§ç”Ÿé—®é¢˜çš„ã€‚2007 å¹´çš„ç¾å›½å°±å› æ›´æ–°äº† DST è§„åˆ™è€Œå¯¼è‡´å¤§é‡è½¯ä»¶å‡ºç°é—®é¢˜ã€‚

> Changes to DST rules cause problems in existing computer installations. For example, the 2007 change to DST rules in North America required that many computer systems be upgraded, with the greatest impact on e-mail and calendar programs. The upgrades required a significant effort by corporate information technologists.

ä¸ºäº†è¾¾åˆ°èŠ‚èƒ½çš„æ•ˆæœä¸å…¶è°ƒæ•´æ—¶é’Ÿï¼Œä¸å¦‚ç›´æ¥è°ƒæ•´ä¸Šç­æ—¶é—´æ¥çš„å®åœ¨ä¸”å¯è¡Œã€‚å°±åƒæˆ‘ä»¬ä¸Šå­¦æ—¶çš„å†¬å­£ä½œæ¯å’Œå¤å­£ä½œæ¯ä¸€æ ·ï¼ˆç¬‘ï¼‰ã€‚

[](#å‚è€ƒ "å‚è€ƒ")å‚è€ƒ
--------------

[Handling Time Zone in JavaScript](https://toastui.medium.com/handling-time-zone-in-javascript-547e67aa842d)

[On Seasonal Time-adjustment in Countries South of Lat. 30Â°](https://paperspast.natlib.govt.nz/periodicals/TPRSNZ1895-28.2.7.1.5)

[Pluralsight : Date and Time Fundamentals](https://www.pluralsight.com/courses/date-time-fundamentals)

[Wikipedia : timezone](https://en.wikipedia.org/wiki/Time_zone)

[Wikipedia : DST](https://en.wikipedia.org/wiki/Daylight_saving_time)

[Wikipedia : Unix Time](https://en.wikipedia.org/wiki/Unix_time)

[Wikipedia : ISO-8601](https://en.wikipedia.org/wiki/ISO_8601)

[IANA timezone Database](https://www.iana.org/time-zones)

[Microsoft Daylight Saving Time & Time Zone Blog](https://blogs.technet.microsoft.com/dst2007)

[MDN : Date API](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)

[Moment Timezone](https://momentjs.com/timezone/)

[RFC-1123](https://tools.ietf.org/html/rfc1123)

[RFC2888](https://tools.ietf.org/html/rfc2822)